<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>节流</title>
</head>
<body>
<button id="btn">发送请求</button>
</body>
</html>
<script>
  const ajaxFn = () => {
    console.log(`发送请求${Date.now()}`)
  }
  document.getElementById('btn').addEventListener('click', throttle(ajaxFn, 2000))
  function throttle(fn, delay) {
    let pre = 0, timer = null;
    return function (...arg){
      let now = Date.now()
      if(now - pre > delay){
        clearTimeout(timer)
        timer = setTimeout(()=> {
          fn.apply(this, arg)
          pre = now
        }, delay)
      } else {
        fn.apply(this, arg)
        pre = now
      }
    }
  }
</script>
