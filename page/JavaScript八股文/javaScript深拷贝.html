<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>深拷贝</title>
</head>
<body>
<pre>
     let obj1 = {
    name: 'xiao',
    age: 19
  }
  const deepClone = (data, maps = new WeakMap())=> {
    if(maps.get(data)){
      return data
    }
    let result = Array.isArray(data) ? [] : {}
    maps.set(data, true)
    for(let key in data){
      if(data.hasOwnProperty(key)){
        result[key] = typeof data[key] === 'object' ? deepClone(data[key]) : data[key]
      }
    }
    return result
  }
  const obj2 = deepClone(obj1)
  obj1.age = 20
  console.log(obj1)
  console.log(obj2)
</pre>
</body>
</html>
<script>
  let obj1 = {
    name: 'xiao',
    age: 19
  }
  const deepClone = (data, maps = new WeakMap())=> {
    if(maps.get(data)){
      return data
    }
    let result = Array.isArray(data) ? [] : {}
    maps.set(data, true)
    for(let key in data){
      if(data.hasOwnProperty(key)){
        result[key] = typeof data[key] === 'object' ? deepClone(data[key]) : data[key]
      }
    }
    return result
  }
  const obj2 = deepClone(obj1)
  obj1.age = 20
  console.log(obj1)
  console.log(obj2)
</script>
