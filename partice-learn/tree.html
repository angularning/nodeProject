<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
</head>
<body></body>
<script>
    let _0x545c69 = '0x57'
    _0x545c69 = _0x545c69 - 0x0;
    console.log(_0x545c69)
    const a = Array({length: 5})
    const b = Array.from({length: 5})
    // console.log(a.length, b.length)
    const arr = [
        {id: 1, name: '部门1', pid: 0},
        {id: 2, name: '部门2', pid: 1},
        {id: 3, name: '部门3', pid: 1},
        {id: 4, name: '部门4', pid: 3},
        {id: 5, name: '部门5', pid: 4},
    ]
    const result = [
        {
            pid: 0,
            id: 1,
            name: '部门1',
            children: [
                {id: 2, name: '部门2', pid: 1, children: []},
                {id: 3, name: '部门3', pid: 1,
                    children: [
                        {id: 4, name: '部门4', pid: 3,
                        children: [
                            {id: 5, name: '部门5', pid: 4},
                        ]
                        },
                    ]
                },
            ]
        }
    ]
    // const transTree = (arr, result, pid) => {
    //     arr.forEach(item=>{
    //         if(item.pid === pid){
    //             const items = {...item, children:[]}
    //             result.push(items)
    //             transTree(arr, items.children, item.id)
    //         }
    //     })
    //     return result
    // }
    // const getTree = (data, pid)=> {
    //     const result = []
    //     transTree(data, result, pid)
    //     return result
    // }
    // console.log(getTree(arr,0))
/*
    const arrToTree = (arr, pid) => {
        let result = []
        arr.forEach(item => {
            if (item.pid === pid) {
                item.children = arrToTree(arr, item.id)
                result.push(item)
            }
        })
        return result
    }
    console.log(arrToTree(arr, 0)) */

    const arrToTree = (arr, pid) => {
        let mapTree = {}
        let result = []
        for (let v of arr) {
            v = {...v,children: []}
            mapTree[v.id] = v
            if(v.pid === pid){
                result.push(v)
            } else {
                mapTree[v.pid].children.push(v)
            }
        }
    }

    arrToTree(arr, 0)

</script>

</html>
